# Lab1 : HTML-Editor
## 鍔熻兘妯″潡鎬昏堪

## 鍔熻兘妯″潡鎻忚堪
### Console
<<<<<<< HEAD
* 需求简述：
  * 读取用户输入
  * 返回对应的输出或报错
* 功能开发逻辑：
  1. 初始化
  2. 读取用户输入
  3. 解析为命令
  4. 运行命令
  5. 返回对应的输出或报错

### CommandParser
=======
* 闇�姹傜畝杩帮細
* 鍔熻兘寮�鍙戦�昏緫锛�

### CommandParser

#### 闇�姹傜畝杩�
CommandParser 绫绘槸涓�涓懡浠よВ鏋愬櫒锛屼富瑕佺敤浜庤В鏋愬拰澶勭悊鐢ㄦ埛杈撳叆鐨勫懡浠ゃ�傝瑙ｆ瀽鍣ㄩ渶瑕佽兘澶燂細
- 澶勭悊涓嶅悓鏍煎紡鐨勫懡浠よ緭鍏�
- 鏀寔甯﹀弬鏁板拰涓嶅甫鍙傛暟鐨勫懡浠�
- 瀵圭壒娈婂懡浠わ紙濡俥dit-text銆乮nsert銆乤ppend锛夎繘琛岀壒娈婂鐞�
- 纭繚鍛戒护鏍煎紡鐨勬纭�у拰鍙傛暟鐨勫畬鏁存��

#### 鍔熻兘寮�鍙戦�昏緫

##### 1. 鏍稿績缁勪欢
- CommandParser锛氬懡浠よВ鏋愮殑涓绘帶鍒跺櫒
- CommandFactory锛氬懡浠ゅ璞＄殑鍒涘缓宸ュ巶
- Session锛氫細璇濈鐞�
- Command锛氬懡浠ゆ帴鍙ｆ垨鎶借薄绫�

##### 2. 涓昏澶勭悊娴佺▼
1. 鍛戒护杈撳叆楠岃瘉
    - 妫�鏌ヨ緭鍏ユ槸鍚︿负绌�
    - 绉婚櫎棣栧熬绌虹櫧瀛楃

2. 鍛戒护鍒嗗壊澶勭悊
    - 灏嗚緭鍏ユ寜绌烘牸鍒嗗壊涓哄懡浠ゅ悕鍜屽弬鏁伴儴鍒�
    - 鏍规嵁鍛戒护鏄惁鍖呭惈鍙傛暟鍐冲畾澶勭悊鏂瑰紡

3. 鍙傛暟瑙ｆ瀽娴佺▼
    - 鏅�氬懡浠わ細鐩存帴鎸夌┖鏍煎垎鍓插弬鏁�
    - 鐗规畩鍛戒护锛坋dit-text銆乮nsert銆乤ppend锛夛細淇濈暀鏂囨湰鍐呭鐨勫畬鏁存��

4. 鍛戒护鍒涘缓
    - 閫氳繃 CommandFactory 鍒涘缓瀵瑰簲鐨勫懡浠ゅ璞�
    - 鏍规嵁鍙傛暟鏁伴噺閫夋嫨閫傚綋鐨勫伐鍘傛柟娉�

#### 璁捐妯″紡璇存槑

##### 1. 宸ュ巶妯″紡
- **瀹炵幇鏂瑰紡**锛氫娇鐢� CommandFactory 绫诲垱寤轰笉鍚岀被鍨嬬殑鍛戒护瀵硅薄
- **浼樺娍**锛�
    - 灏佽浜嗗懡浠ゅ璞＄殑鍒涘缓閫昏緫
    - 鎻愪緵浜嗙粺涓�鐨勫懡浠ゅ垱寤烘帴鍙�
    - 渚夸簬鎵╁睍鏂扮殑鍛戒护绫诲瀷

##### 2. 鍛戒护妯″紡
- **瀹炵幇鏂瑰紡**锛氶�氳繃 Command 鎺ュ彛瀹氫箟缁熶竴鐨勫懡浠ゆ墽琛屾帴鍙�
- **浼樺娍**锛�
    - 灏嗗懡浠よ姹傚皝瑁呬负瀵硅薄
    - 鏀寔鍛戒护鐨勫弬鏁板寲
    - 渚夸簬瀹炵幇鍛戒护鐨勬挙閿�鍜岄噸鍋氬姛鑳�

##### 3. 鍗曚竴鑱岃矗鍘熷垯
- **浣撶幇**锛欳ommandParser 绫讳笓娉ㄤ簬鍛戒护瑙ｆ瀽閫昏緫
- **浼樺娍**锛�
    - 鎻愰珮浠ｇ爜鐨勫唴鑱氭��
    - 闄嶄綆浠ｇ爜鐨勮�﹀悎搴�
    - 渚夸簬缁存姢鍜屾祴璇�

#### 鍏抽敭鏂规硶璇存槑

##### processCommand 鏂规硶
- **鍔熻兘**锛氬鐞嗚緭鍏ョ殑鍛戒护瀛楃涓�
- **鍙傛暟**锛歋tring input - 鐢ㄦ埛杈撳叆鐨勫懡浠�
- **杩斿洖鍊�**锛欳ommand 瀵硅薄
- **寮傚父澶勭悊**锛�
    - IllegalArgumentException锛氬懡浠や负绌烘椂鎶涘嚭
    - ElementNotFound锛氬厓绱犳湭鎵惧埌鏃舵姏鍑�

##### parseCommandArgs 鏂规硶
- **鍔熻兘**锛氳В鏋愬懡浠ゅ弬鏁�
- **鐗规畩澶勭悊**锛�
    - edit-text 鍛戒护锛氫繚鐣欐枃鏈唴瀹圭殑瀹屾暣鎬�
    - insert/append 鍛戒护锛氬鐞嗗繀闇�鍙傛暟鍜屽彲閫夋枃鏈唴瀹�



### CommandFactory
#### 闇�姹傜畝杩�
CommandFactory 绫绘槸涓�涓懡浠ゅ伐鍘傦紝璐熻矗鍒涘缓鍜岀鐞嗗悇绉嶅懡浠ゅ璞°�備富瑕侀渶姹傚寘鎷細
- 缁熶竴绠＄悊鎵�鏈夊懡浠ょ殑鍒涘缓閫昏緫
- 楠岃瘉鍛戒护鏍煎紡鐨勬纭��
- 鏀寔鐏垫椿鐨勫懡浠ゆ敞鍐屾満鍒�
- 鎻愪緵鍛戒护鍙傛暟鐨勯獙璇佸姛鑳�
- 缁存姢鍛戒护鐨勬牸寮忚鑼�

#### 鍔熻兘寮�鍙戦�昏緫

##### 1. 鍛戒护绯荤粺鏋舵瀯
鍛戒护绯荤粺鎸夊姛鑳藉垎涓轰互涓嬪嚑绫伙細
1. IO鍛戒护锛歩nit銆乺ead銆乻ave
2. 鏄剧ず鍛戒护锛歱rint-indent銆乸rint-tree銆乻pell-check
3. 缂栬緫鍛戒护锛歩nsert銆乤ppend銆乪dit-id銆乪dit-text銆乨elete
4. 鍘嗗彶鍛戒护锛歳edo銆乽ndo
5. 浼氳瘽鍛戒护锛歟xit銆乴oad銆乧lose銆乪ditor-list銆乪dit

##### 2. 鏍稿績缁勪欢璁捐
1. CommandFormat 鍐呴儴绫�
    - 绠＄悊鍛戒护鐨勫弬鏁拌鑼�
    - 瀛樺偍鍛戒护鐨勪娇鐢ㄦ牸寮�
    - 瀹氫箟鍙傛暟鐨勬暟閲忛檺鍒�

2. CommandCreator 鍑芥暟寮忔帴鍙�
    - 瀹氫箟鍛戒护鍒涘缓鐨勭粺涓�鎺ュ彛
    - 鏀寔 lambda 琛ㄨ揪寮忓垱寤哄懡浠�

3. 鏁版嵁瀛樺偍
    - commandMap锛氬瓨鍌ㄥ懡浠ゅ悕绉颁笌鍒涘缓鍣ㄧ殑鏄犲皠
    - commandFormats锛氬瓨鍌ㄥ懡浠ゆ牸寮忚鑼�

#### 璁捐妯″紡璇存槑

##### 1. 宸ュ巶妯″紡
- **瀹炵幇鏂瑰紡**锛氫娇鐢� CommandFactory 缁熶竴鍒涘缓鍚勭被鍛戒护瀵硅薄
- **鏍稿績缁勪欢**锛�
    - CommandFactory锛氫富宸ュ巶绫�
    - CommandCreator锛氬懡浠ゅ垱寤烘帴鍙�
    - Command锛氭娊璞″懡浠ゆ帴鍙�
- **浼樺娍**锛�
    - 灏佽瀵硅薄鍒涘缓閫昏緫
    - 缁熶竴绠＄悊鍛戒护瀹炰緥鍖�
    - 渚夸簬鎵╁睍鏂板懡浠�

##### 2. 鍛戒护妯″紡
- **瀹炵幇鏂瑰紡**锛氶�氳繃涓嶅悓鐨勫懡浠ゅ疄鐜扮被灏佽鍏蜂綋鎿嶄綔
- **鍒嗙被瀹炵幇**锛�
    - IOCommand
    - displayCommand
    - editCommand
    - historyCommand
    - sessionCommand
- **浼樺娍**锛�
    - 鍛戒护鐨勫皝瑁呭拰瑙ｈ��
    - 鏀寔鍛戒护鐨勬挙閿�鍜岄噸鍋�
    - 渚夸簬娣诲姞鏂扮殑鍛戒护绫诲瀷

##### 3. 鍗曚緥妯″紡
- **瀹炵幇鏂瑰紡**锛氶�氳繃 Session 绠＄悊缂栬緫鍣ㄧ姸鎬�
- **浼樺娍**锛�
    - 纭繚鍛戒护鎵ц鐨勭姸鎬佷竴鑷存��
    - 闆嗕腑绠＄悊缂栬緫鍣ㄨ祫婧�

##### 4. 绛栫暐妯″紡
- **瀹炵幇鏂瑰紡**锛氶�氳繃 CommandCreator 鎺ュ彛瀹炵幇涓嶅悓鐨勫懡浠ゅ垱寤虹瓥鐣�
- **浼樺娍**锛�
    - 鏀寔鐏垫椿鐨勫懡浠ゅ垱寤虹瓥鐣�
    - 渚夸簬淇敼鍜屾墿灞曞懡浠ゅ垱寤洪�昏緫

#### 鍏抽敭鏂规硶璇存槑

##### initCommandFormats 鏂规硶
- **鍔熻兘**锛氬垵濮嬪寲鎵�鏈夋敮鎸佺殑鍛戒护鏍煎紡
- **瀹炵幇瑕佺偣**锛�
    - 瀹氫箟姣忎釜鍛戒护鐨勫弬鏁拌鑼�
    - 璁剧疆鍙傛暟鏁伴噺鐨勪笂涓嬮檺
    - 鎻愪緵鍛戒护浣跨敤鐨勬牸寮忚鏄�

##### registerCommands 鏂规硶
- **鍔熻兘**锛氭敞鍐屾墍鏈夊彲鐢ㄧ殑鍛戒护
- **瀹炵幇瑕佺偣**锛�
    - 浣跨敤 lambda 琛ㄨ揪寮忕畝鍖栧懡浠ゅ垱寤�
    - 涓烘瘡涓懡浠ゆ寚瀹氬叿浣撶殑鍒涘缓閫昏緫
    - 鍏宠仈鍛戒护涓庡叾瀵瑰簲鐨勭紪杈戝櫒鎿嶄綔

##### validateCommandFormat 鏂规硶
- **鍔熻兘**锛氶獙璇佸懡浠ゆ牸寮忕殑姝ｇ‘鎬�
- **楠岃瘉鍐呭**锛�
    - 鍛戒护鏄惁瀛樺湪
    - 鍙傛暟鏁伴噺鏄惁绗﹀悎瑕佹眰
    - 鎻愪緵璇︾粏鐨勯敊璇俊鎭�

#### 浣跨敤娉ㄦ剰浜嬮」
1. 鏂板鍛戒护鏃堕渶瑕侊細
    - 鍦� initCommandFormats 涓畾涔夋牸寮�
    - 鍦� registerCommands 涓敞鍐屽垱寤洪�昏緫
    - 瀹炵幇瀵瑰簲鐨勫懡浠ょ被

2. 鍙傛暟楠岃瘉锛�
    - 纭繚鍙傛暟鏁伴噺绗﹀悎瑙勮寖
    - 娉ㄦ剰鐗规畩鍛戒护鐨勫弬鏁板鐞�
    - 澶勭悊鍙�夊弬鏁扮殑榛樿鍊�

3. 閿欒澶勭悊锛�
    - 鏈煡鍛戒护鎶涘嚭 IllegalArgumentException
    - 鍙傛暟閿欒鎻愪緵璇︾粏鐨勯敊璇俊鎭�
    - 纭繚鍛戒护鍒涘缓鐨勫仴澹��

>>>>>>> e620c3d0771af4c020a2f542294030dbaebb0ad2

### CommandInvoker
* 需求简述：
  * 执行命令
  * 存储命令
* 功能开发逻辑：
  1. 执行命令
  2. 在对应的CommandHistory中存储命令



### CommandHistory

#### 闇�姹傜畝杩帮細
- **鍛戒护鍘嗗彶绠＄悊**锛氳褰曞拰绠＄悊鍙挙閿�鍜屽彲閲嶅仛鐨勬搷浣�
- **鎾ら攢鍜岄噸鍋氭満鍒�**锛氭彁渚涘宸叉墽琛屽懡浠ょ殑鎾ら攢鍜岄噸鍋氬姛鑳�
- **鐘舵�佽拷韪�**锛氳窡韪綋鍓嶅彲鎾ら攢鍜屽彲閲嶅仛鐨勬搷浣滅姸鎬�
- **鍛戒护鏍堢鐞�**锛氫娇鐢ㄤ袱涓爤锛堟挙閿�鏍堝拰閲嶅仛鏍堬級绠＄悊鍛戒护鍘嗗彶

#### 鍔熻兘寮�鍙戦�昏緫锛�
##### (1) 鍛戒护鏍堝垵濮嬪寲
- 鍒涘缓涓や釜鐙珛鐨勬爤锛歚undoStack`鍜宍redoStack`
- `undoStack`瀛樺偍鍙互鎾ら攢鐨勫懡浠�
- `redoStack`瀛樺偍鍙互閲嶅仛鐨勫懡浠�

##### (2) 鍛戒护鍏ユ爤绠＄悊
- `push(Command command)`鏂规硶
    - 妫�鏌ュ懡浠ゆ槸鍚﹀彲鎾ら攢
    - 灏嗗彲鎾ら攢鍛戒护鍘嬪叆`undoStack`
    - 娓呯┖`redoStack`锛岀‘淇濇柊鍛戒护鎵ц鍚庝箣鍓嶇殑閲嶅仛璁板綍澶辨晥

##### (3) 鎾ら攢鎿嶄綔
- `undo()`鏂规硶
    - 妫�鏌undoStack`鏄惁涓虹┖
    - 寮瑰嚭鏈�杩戠殑鍙挙閿�鍛戒护
    - 灏嗗懡浠ゅ帇鍏redoStack`
    - 鎵ц鍛戒护鐨勬挙閿�閫昏緫
    - 濡傛爤涓虹┖锛屾姏鍑篳NoUndoableOperationException`

##### (4) 閲嶅仛鎿嶄綔
- `redo()`鏂规硶
    - 妫�鏌redoStack`鏄惁涓虹┖
    - 寮瑰嚭鏈�杩戠殑鍙噸鍋氬懡浠�
    - 灏嗗懡浠ゅ帇鍏undoStack`
    - 閲嶆柊鎵ц鍛戒护
    - 濡傛爤涓虹┖锛屾姏鍑篳NoRedoableOperationException`

##### (5) 鐘舵�佹鏌�
- `canUndo()`锛氭鏌ユ槸鍚︽湁鍙挙閿�鐨勬搷浣�
- `canRedo()`锛氭鏌ユ槸鍚︽湁鍙噸鍋氱殑鎿嶄綔
- 閫氳繃妫�鏌ヤ袱涓爤鐨勯潪绌虹姸鎬佸疄鐜�

##### (6) 杈呭姪鏂规硶
- `peekLast()`锛氳幏鍙栨渶鍚庢墽琛岀殑鍛戒护锛屼絾涓嶇Щ闄�
- 濡傛棤鍙挙閿�鍛戒护锛屾姏鍑篳NoUndoableOperationException`

##### (7) 寮傚父澶勭悊
- 鑷畾涔夊紓甯革細`NoUndoableOperationException`
- 鑷畾涔夊紓甯革細`NoRedoableOperationException`
- 纭繚鍦ㄦ棤鍙挙閿�鎴栧彲閲嶅仛鎿嶄綔鏃舵彁渚涙槑纭殑閿欒鎻愮ず

##### (8) 璁捐妯″紡搴旂敤
- 鍛戒护妯″紡锛氬皢璇锋眰灏佽涓哄璞★紝鏀寔鎾ら攢鍜岄噸鍋�
- 鏍堟暟鎹粨鏋勶細楂樻晥绠＄悊鍛戒护鍘嗗彶
- 鍗曚竴鑱岃矗鍘熷垯锛欳ommandHistory涓撴敞浜庡懡浠ゅ巻鍙茬鐞�



### Command
<<<<<<< HEAD
需求1
* 需求简述：
  * 执行指令
  * 保存undo所需的内容
* 功能开发逻辑：
  * 抽象接口：execute()

需求2 (UndoableCommand)
* 需求简述：
  * 撤销指令
* 功能开发逻辑：
  * 抽象接口：undo()


=======
* 闇�姹傜畝杩帮細
* 鍔熻兘寮�鍙戦�昏緫锛�
>>>>>>> e620c3d0771af4c020a2f542294030dbaebb0ad2

### Session

### Editor
#### 闇�姹傜畝杩帮細
- **鏂囨。绠＄悊**锛氬姞杞姐�佷繚瀛樸�佸垱寤哄拰鍏抽棴HTML鏂囨。
- **鏂囨。缂栬緫**锛氭敮鎸佹坊鍔犮�佸垹闄ゃ�佷慨鏀笻TML鍏冪礌
- **鏂囨。灞曠ず**锛氭敮鎸佸绉嶆牸寮忔樉绀猴紙鏍戝舰銆佺缉杩涳級
- **鏂囨。鎿嶄綔鍘嗗彶**锛氭敮鎸佹挙閿�(undo)鍜岄噸鍋�(redo)
- **鏂囨。鐘舵�佽窡韪�**锛氳褰曟枃妗ｆ槸鍚﹁淇敼
- **棰濆鍔熻兘**锛氭嫾鍐欐鏌ャ�両D鏄剧ず鎺у埗

#### 鍔熻兘寮�鍙戦�昏緫锛�
##### (1) 鏂囨。鍩虹鎿嶄綔
- `init()`: 鍒濆鍖栨柊鏂囨。
- `load(filename)`: 鍔犺浇宸叉湁鏂囨。鎴栧垱寤烘柊鏂囨。
- `save(filename)`: 淇濆瓨鏂囨。鍒版寚瀹氭枃浠�
- `close()`: 鍏抽棴鏂囨。锛屾彁绀轰繚瀛樹慨鏀�
- `getFileName()`: 鑾峰彇褰撳墠鏂囨。鍚嶇О

##### (2) 鏂囨。缂栬緫鍔熻兘
- `append()`: 鍦ㄦ寚瀹氱埗鍏冪礌涓嬫坊鍔犳柊鍏冪礌
- `insert()`: 鍦ㄦ寚瀹氫綅缃彃鍏ユ柊鍏冪礌
- `delete()`: 鍒犻櫎鎸囧畾ID鐨勫厓绱�
- `editId()`: 淇敼鍏冪礌鐨処D
- `editText()`: 淇敼鍏冪礌鐨勬枃鏈唴瀹�

##### (3) 鍘嗗彶璁板綍绠＄悊
- `executeCommand()`: 鎵ц鍛戒护骞惰褰�
- `storeCommand()`: 瀛樺偍鍛戒护鍒板巻鍙茶褰�
- `undo()`: 鎾ら攢涓婁竴涓搷浣�
- `redo()`: 閲嶅仛宸叉挙閿�鐨勬搷浣�
- `updateModifiedState()`: 鏇存柊鏂囨。淇敼鐘舵��

##### (4) 鏄剧ず涓庢牸寮忓寲
- `display()`: 鏄剧ず褰撳墠鏂囨。鍐呭
- `printTree()`: 浠ユ爲褰㈢粨鏋勬樉绀烘枃妗�
- `printIndent()`: 浠ョ缉杩涙牸寮忔樉绀烘枃妗�
- `showId()`: 鎺у埗鏄惁鏄剧ず鍏冪礌ID
- `spellCheck()`: 鎵ц鎷煎啓妫�鏌�

##### (5) 鐘舵�佺鐞�
- `isModified()`: 妫�鏌ユ枃妗ｆ槸鍚﹁淇敼
- `toggleModified()`: 鍒囨崲鏂囨。淇敼鐘舵��
- `setShowId()`: 璁剧疆鏄惁鏄剧ず鍏冪礌ID


### HTMLDocument
#### 闇�姹傜畝杩�
HTMLDocument 绫绘槸涓�涓� HTML 鏂囨。澶勭悊鍣紝涓昏璐熻矗锛�
- HTML 鏂囨。鐨勬爲褰㈢粨鏋勭鐞�
- 鍏冪礌鐨勫鍒犳敼鏌ユ搷浣�
- 鏂囨。鐨勬牸寮忓寲杈撳嚭
- 鎷煎啓妫�鏌ュ姛鑳�
- 鏂囨。鐨勫簭鍒楀寲鍜屽弽搴忓垪鍖�

#### 鍔熻兘寮�鍙戦�昏緫

##### 1. 鏁版嵁缁撴瀯璁捐
1. 鏍稿績鏁版嵁缁撴瀯
    - HTMLElement锛氳〃绀� HTML 鍏冪礌鑺傜偣
    - 鏍戝舰缁撴瀯锛氫娇鐢ㄧ埗瀛愬叧绯荤淮鎶ゆ枃妗ｇ粨鏋�
    - idSet锛氱敤浜庡揩閫熼獙璇� ID 鍞竴鎬�
    - isLastChild锛氱敤浜庢爲褰㈡樉绀虹殑鏍煎紡鎺у埗

2. 鏂囨。鐘舵�佺鐞�
    - showID锛氭帶鍒舵槸鍚︽樉绀哄厓绱� ID
    - templatePath锛氭ā鏉挎枃浠惰矾寰�
    - StringBuilder锛氱敤浜庨珮鏁堝瓧绗︿覆鎷兼帴

##### 2. 涓昏鍔熻兘妯″潡

###### 2.1 鏂囨。鎿嶄綔
1. 鍒濆鍖栦笌璇诲彇
   ```java
   public void init()
   public void read(File input)
   ```

2. 鍏冪礌绠＄悊
   ```java
   public void appendElement(String tagName, String idValue, String textContent, String parentElement)
   public void insertElement(String tagName, String idValue, String insertLocation, String textContent)
   public void removeElementById(String id)
   ```

3. 鍏冪礌缂栬緫
   ```java
   public void editID(String oldID, String newID)
   public void editText(String id, String newText)
   ```

###### 2.2 鏂囨。灞曠ず
1. 鏍煎紡鍖栬緭鍑�
   ```java
   public String getIndentFormat(int indent)
   public String getTreeFormat(boolean spellCheck)
   ```

2. 鎷煎啓妫�鏌�
   ```java
   public String getSpellCheck()
   ```

#### 璁捐妯″紡璇存槑

##### 1. 缁勫悎妯″紡
- **瀹炵幇鏂瑰紡**锛氶�氳繃 HTMLElement 鐨勬爲褰㈢粨鏋勫疄鐜�
- **鏍稿績缁勪欢**锛�
    - HTMLElement锛氱粍浠剁被
    - children锛氬瓙鍏冪礌闆嗗悎
- **浼樺娍**锛�
    - 缁熶竴澶勭悊鍗曚釜鍏冪礌鍜屽厓绱犵粍鍚�
    - 绠�鍖栨爲褰㈢粨鏋勭殑閬嶅巻鍜屾搷浣�
    - 鏀寔閫掑綊鎿嶄綔

##### 2. 寤洪�犺�呮ā寮�
- **瀹炵幇鏂瑰紡**锛氫娇鐢� HTMLElement.Builder 鍒涘缓鍏冪礌
- **浼樺娍**锛�
    - 鍒嗘鏋勫缓澶嶆潅瀵硅薄
    - 鏀寔鍙�夊弬鏁�
    - 纭繚瀵硅薄鏋勫缓鐨勫畬鏁存��

##### 3. 璁块棶鑰呮ā寮�
- **瀹炵幇鏂瑰紡**锛氶�氳繃涓嶅悓鐨勬牸寮忓寲鏂规硶璁块棶鍏冪礌
- **鍏蜂綋瀹炵幇**锛�
    - getIndentFormat锛氱缉杩涙牸寮忚闂�
    - getTreeFormat锛氭爲褰㈡牸寮忚闂�
    - getSpellCheck锛氭嫾鍐欐鏌ヨ闂�
- **浼樺娍**锛�
    - 鍒嗙绠楁硶鍜屽璞＄粨鏋�
    - 鏀寔澶氱杈撳嚭鏍煎紡
    - 鏄撲簬娣诲姞鏂扮殑璁块棶鏂瑰紡

#### 寮傚父澶勭悊鏈哄埗

##### 1. 鑷畾涔夊紓甯�
```java
ElementNotFound锛氬厓绱犳湭鎵惧埌寮傚父
ElementDuplicateID锛氶噸澶� ID 寮傚父
ElementBadRemoved锛氶敊璇垹闄ゅ紓甯�
```

##### 2. 寮傚父澶勭悊绛栫暐
1. 鍏冪礌鎿嶄綔楠岃瘉
    - ID 鍞竴鎬ф鏌�
    - 鐖跺厓绱犲瓨鍦ㄦ�ф鏌�
    - 鏍瑰厓绱犱繚鎶�

2. 閿欒鎭㈠鏈哄埗
    - 浜嬪姟鎬ф搷浣�
    - 鐘舵�佸洖婊氭敮鎸�

#### 鎬ц兘浼樺寲鑰冭檻

##### 1. 鍐呭瓨浼樺寲
1. StringBuilder 浣跨敤
    - 閲嶇敤 StringBuilder 瀹炰緥
    - 娓呯┖鑰岄潪鍒涘缓鏂板疄渚�

2. 闆嗗悎浼樺寲
    - 浣跨敤 HashSet 瀛樺偍 ID
    - 閬垮厤閲嶅閬嶅巻

##### 2. 绠楁硶浼樺寲
1. 鍏冪礌鏌ユ壘
    - ID 绱㈠紩浼樺寲
    - 閫掑綊鏌ユ壘浼樺寲

2. 鏍煎紡鍖栬緭鍑�
    - 缂撳瓨鏈哄埗
    - 鎸夐渶璁＄畻

#### 浣跨敤娉ㄦ剰浜嬮」
1. ID 绠＄悊
    - 纭繚 ID 鍞竴鎬�
    - 鐗规畩鍏冪礌 ID 澶勭悊

2. 鏂囨。鎿嶄綔
    - 鏍瑰厓绱犱繚鎶�
    - 鐖跺瓙鍏崇郴缁存姢
    - 鏍煎紡鍖栧弬鏁拌缃�

3. 寮傚父澶勭悊
    - 鎹曡幏鐩稿叧寮傚父
    - 鐘舵�佷竴鑷存�х淮鎶�


### HTMLElement
#### 闇�姹傜畝杩帮細
鏈疄楠屾棬鍦ㄩ�氳繃Builder妯″紡瀹炵幇HTML鍏冪礌鐨勯珮鏁堟瀯閫犱笌鎿嶄綔锛屼互绠�鍖栧鏉侶TML缁撴瀯鐨勫垱寤鸿繃绋嬶紝鍚屾椂鏀寔鍩烘湰鐨凥TML鑺傜偣鎿嶄綔锛堝鎻掑叆銆佸垹闄ゃ�佸厔寮熻妭鐐归摼鎺ユ洿鏂扮瓑锛夈�傚疄楠岀殑鍏蜂綋鐩爣鍖呮嫭锛�
1. 瀹炵幇涓�涓敮鎸佸欢杩熷垵濮嬪寲鍜岀嚎绋嬪畨鍏ㄧ殑HTML鑺傜偣鏍戯紱
2. 鎻愪緵鐏垫椿鐨凚uilder妯″紡锛岀畝鍖朒TML鑺傜偣鐨勬瀯閫犱笌鎿嶄綔锛�
3. 閫氳繃鍔熻兘鎺ュ彛鎵╁睍鎬э紝鏀寔鑷畾涔夋搷浣滐紙濡傛嫾鍐欐鏌ュ拰鍏冪礌浣嶇疆鎻掑叆锛夈��
4. 鐗规畩瑕佹眰锛氫负浜嗙畝鍖栬姹傦紝鏈 Lab 涓浜� HTML 鐨勭害瀹氬涓嬶細
锛�1锛塦<html>`, `<head>`,` <title>` ,` <body>`鍥涗釜鏍囩鏈変笖浠呮湁涓�涓�侶TML 鏂囦欢椤跺眰鏄痐<html>`鍏冪礌锛屽叾鍙湁涓や釜瀛愬厓绱狅紝渚濆簭涓篳<head>`鍜宍<body>`銆傚悓鏃讹紝`<title>`鏄痐<head>`鐨勫瓙鍏冪礌銆傜粨鏋勫涓嬶細

```html
<html>
  <head>
    <title>My Webpage</title>
  </head>
  <body>
    ...
  </body>
</html>
```
锛�2锛夊厓绱犲唴閮ㄥ彲浠ュ寘鍚枃鏈唴瀹癸紝浣嗘枃鏈繀椤诲鍦ㄨ鍏冪礌鐨勫叾浠栧瓙鍏冪礌涔嬪墠锛堝弬瑙佷笂杩颁緥瀛愪腑鐨刞<div id="footer">`锛夈��
锛�3锛夊睘鎬у彧鏀寔 id锛岄櫎`<html>`, `<head>`,` <title>` ,` <body>`澶栧叾浠栧厓绱犲繀椤绘嫢鏈� id 灞炴�э紝鑻ヨ繖鍥涗釜鏍囩娌℃湁鎻愪緵 id锛岄粯璁� id 涓烘爣绛惧悕銆傚悓鏃� id 搴旇鍏锋湁鍞竴鎬с��
#### 鍔熻兘寮�鍙戦�昏緫锛�
锛�1锛夊姛鑳芥ā鍧楀垝鍒嗭細

浠ｇ爜涓昏鍒嗕负涓や釜鏍稿績妯″潡锛�
1.1 **鎶借薄鍩虹被 `HTMLElement`**锛�
    - 瀹氫箟HTML鑺傜偣鐨勫熀鏈粨鏋勪笌琛屼负銆�
    - 鎻愪緵Builder鎺ュ彛瀹氫箟浠ュ強閫氱敤鐨勯�昏緫瀹炵幇锛堝寤惰繜鍒濆鍖栥�佸瓙鑺傜偣绠＄悊锛夈��
1.2 **鍏蜂綋瀹炵幇绫� `HTMLElementImpl`**锛�
    - 瀹炵幇鍏蜂綋鐨凥TML鑺傜偣琛屼负锛堝鎻掑叆銆佸垹闄ゃ�佸睍绀猴級銆�
    - 瀹炵幇Builder妯″紡鐨勫叿浣撻�昏緫銆�

##### Builder妯″紡鐨勯�昏緫涓庡疄鐜�
閫氳繃Builder妯″紡锛屾垜浠兘澶熺伒娲绘瀯閫犲鏉傜殑HTML鑺傜偣鏍戯紝閬垮厤鐩存帴浣跨敤鏋勯�犲嚱鏁板鑷寸殑浠ｇ爜鍐楅暱銆傛牳蹇冮�昏緫濡備笅锛�
1. **鎶借薄鎺ュ彛瀹氫箟**锛�
   鍦╜HTMLElement`涓畾涔塀uilder鎺ュ彛锛屼娇寰楁瀯閫犺涓轰笌鑺傜偣绫诲垎绂汇��
2. **鍏蜂綋瀹炵幇绫� `HTMLElementImpl.BuilderImpl`**锛�
   鎻愪緵鍏蜂綋鐨勬瀯閫犻�昏緫锛屽厑璁告寜闇�璁剧疆`tagName`銆乣id`銆乣className`绛夊睘鎬с��
   浣跨敤閾惧紡鏂规硶璋冪敤锛屾彁楂樹唬鐮佸彲璇绘�с��
3. **鎷煎啓妫�鏌ユ墿灞�**锛�
   鍦ㄦ瀯閫犲畬鎴愬悗锛岄�氳繃`SpellChecker`瀵规枃鏈唴瀹硅繘琛屾嫾鍐欐鏌ュ苟瀛樺偍缁撴灉銆�

##### 寤惰繜鍒濆鍖栦笌澶氱嚎绋嬪畨鍏�
1. **寤惰繜鍒濆鍖� `initializeChildren`**锛�
   鍦ㄥ瓙鑺傜偣棣栨璁块棶鏃讹紝寤惰繜鍒濆鍖朻children`鍒楄〃锛岄伩鍏嶄笉蹇呰鐨勮祫婧愭秷鑰椼��
   寮曞叆鈥滃摠鍏佃妭鐐光��(`start`鍜宍tail`)锛岀畝鍖栬妭鐐规搷浣滈�昏緫銆�
2. **澶氱嚎绋嬪畨鍏�**锛�
   浣跨敤`volatile`鍜宍synchronized`淇濊瘉`children`鐨勭嚎绋嬪畨鍏ㄥ垵濮嬪寲锛岄伩鍏嶉噸澶嶆搷浣溿��

##### HTML鑺傜偣鏍戠殑鎿嶄綔
1.鎻掑叆鎿嶄綔
- **浣嶇疆鎻掑叆锛坄insertElementBefore`锛�**锛�
  閫氳繃鐩爣ID瀹氫綅鎻掑叆浣嶇疆锛屽湪鐩爣鑺傜偣涔嬪墠鎻掑叆鏂拌妭鐐广��
  鏇存柊鑺傜偣鐨刞parent`銆佸厔寮熻妭鐐规寚閽堛�佺储寮曠瓑淇℃伅銆�
- **榛樿灏鹃儴鎻掑叆**锛�
  鑻ョ洰鏍嘔D涓虹┖锛屽垯鑷姩鎻掑叆鍒板熬閮ㄨ妭鐐瑰墠銆�

2.鍒犻櫎鎿嶄綔
- **閫氳繃瀹炰緥鍒犻櫎锛坄removeChild`锛�**锛�
  鏍规嵁浼犲叆鐨勮妭鐐瑰疄渚嬶紝鏇存柊鐖惰妭鐐广�佸厔寮熻妭鐐规寚閽堝苟浠庡瓙鑺傜偣鍒楄〃涓Щ闄ゃ��
- **閫氳繃ID鍒犻櫎锛坄removeChild(String id)`锛�**锛�
  鏍规嵁ID瀹氫綅骞跺垹闄ゆ寚瀹氳妭鐐广��

3.鎷煎啓妫�鏌ュ姛鑳�
- 鍒╃敤鍗曚緥妯″紡鐨刞SpellCheckerManager`瀵规枃鏈唴瀹硅繘琛屾鏌ワ紝杩斿洖淇鍚庣殑缁撴灉銆�
- 鎷煎啓妫�鏌ョ粨鏋滈�氳繃`setSpellCheckResults`瀛樺偍锛屾敮鎸佸悗缁搷浣溿��

### SpellChecker
* 闇�姹傜畝杩帮細閫夋嫨鍚堥�傜殑鎷煎啓妫�鏌ユ湇鍔★紝瀹炵幇瀵瑰厓绱犱腑鐨勬枃鏈唴瀹硅繘琛屾嫾鍐欐鏌ワ紝骞舵姤鍛婇敊璇�.
* 鍔熻兘寮�鍙戦�昏緫锛�
##### 1.**鎷煎啓妫�鏌ラ泦鎴�**
鍦╜build`鏂规硶涓皟鐢╜SpellChecker`瀵规枃鏈唴瀹硅繘琛屾嫾鍐欐鏌ャ��
淇鍚庣殑鏂囨湰瀛樺偍鍦╜HTMLElement`瀹炰緥涓紝纭繚鎷煎啓姝ｇ‘銆�

<<<<<<< HEAD
##### 2. 拼写检查功能开发
=======

##### 2. 鎷煎啓妫�鏌ュ姛鑳藉紑鍙�
>>>>>>> e620c3d0771af4c020a2f542294030dbaebb0ad2

(1) **鎷煎啓妫�鏌ュ櫒瀹炵幇**
浣跨敤LanguageTool搴撶殑`JLanguageTool`瀹炵幇鎷煎啓妫�鏌ュ姛鑳姐��
閬嶅巻鎷煎啓閿欒锛屽埄鐢↙anguageTool鎻愪緵鐨勫缓璁慨姝ｆ枃鏈��
淇閫昏緫閲囩敤鍊掑簭鏇挎崲锛岄伩鍏嶅洜浣嶇疆鍋忕Щ瀵艰嚧閿欒鏇挎崲銆�

<<<<<<< HEAD
(2) **单例模式优化**
在`SpellCheckerManager`中，使用双重检查锁机制实现线程安全的单例模式。
确保拼写检查器`SpellChecker`的实例唯一性，避免资源浪费。
通过`getInstance`方法提供全局访问点，方便在多模块中使用。
>>>>>>> 7edc62df181180db045edeec839cee44d09c4683
=======
(2) **鍗曚緥妯″紡浼樺寲**
鍦╜SpellCheckerManager`涓紝浣跨敤鍙岄噸妫�鏌ラ攣鏈哄埗瀹炵幇绾跨▼瀹夊叏鐨勫崟渚嬫ā寮忋��
纭繚鎷煎啓妫�鏌ュ櫒`SpellChecker`鐨勫疄渚嬪敮涓�鎬э紝閬垮厤璧勬簮娴垂銆�
閫氳繃`getInstance`鏂规硶鎻愪緵鍏ㄥ眬璁块棶鐐癸紝鏂逛究鍦ㄥ妯″潡涓娇鐢ㄣ��

### Session

#### 闇�姹傜畝杩帮細
- **浼氳瘽绠＄悊**锛氱鐞嗗綋鍓嶄細璇濈殑ID銆佹枃浠跺垪琛ㄤ互鍙婃椿璺冪紪杈戝櫒
- **鏂囦欢鎿嶄綔**锛氭敮鎸佸姞杞姐�佷繚瀛樸�佸叧闂枃妗ｏ紝骞惰拷韪枃妗ｇ殑淇敼鐘舵��
- **鏂囦欢鐩綍灞曠ず**锛氭敮鎸佷互鏍戝舰缁撴瀯鎴栫缉杩涙牸寮忔樉绀哄綋鍓嶇紪杈戞枃浠舵墍鍦ㄧ洰褰�
- **浼氳瘽鏁版嵁鎸佷箙鍖�**锛氭敮鎸佸皢浼氳瘽鏁版嵁瀛樺偍鍒版枃浠讹紝浠ュ強浠庢枃浠舵仮澶嶄細璇濇暟鎹�
- **澶氭枃浠剁紪杈戞敮鎸�**锛氭敮鎸佸涓枃浠跺悓鏃剁紪杈戯紝骞舵爣璇嗗綋鍓嶆鍦ㄧ紪杈戝拰淇敼鐨勬枃浠�
- **浼氳瘽閫�鍑�**锛氶��鍑轰細璇濇椂鑷姩淇濆瓨浼氳瘽鐘舵��

#### 鍔熻兘寮�鍙戦�昏緫锛�
##### (1) 浼氳瘽鍩虹鎿嶄綔
- `Session(String id)`: 鏋勯�犲嚱鏁帮紝鍒濆鍖栦細璇濓紝灏濊瘯浠庢枃浠舵仮澶嶄細璇濇暟鎹��
- `enter(String id)`: 杩涘叆涓�涓柊浼氳瘽锛屾仮澶嶈浼氳瘽鐨勬枃浠跺拰缂栬緫鍣ㄤ俊鎭��
- `exit()`: 閫�鍑哄綋鍓嶄細璇濓紝淇濆瓨浼氳瘽鏁版嵁鍒版枃浠躲��
- `getId()`: 鑾峰彇褰撳墠浼氳瘽鐨処D銆�

##### (2) 浼氳瘽鏁版嵁鎸佷箙鍖�
- `dump(String filename)`: 灏嗗綋鍓嶄細璇濈殑鐘舵�侊紙鏂囦欢鍒楄〃銆佺紪杈戝櫒鐘舵�侊級淇濆瓨鍒版枃浠躲��
- `recover(String filename)`: 浠庢枃浠舵仮澶嶄細璇濇暟鎹紝鍖呮嫭鏂囦欢鍒楄〃銆佺紪杈戝櫒鍙婂叾鐘舵�併��
- `load(String filename)`: 鍔犺浇骞舵墦寮�涓�涓枃浠讹紝鍒涘缓瀵瑰簲鐨勭紪杈戝櫒骞舵縺娲昏缂栬緫鍣ㄣ��
- `save(String filename)`: 淇濆瓨褰撳墠缂栬緫鍣ㄧ殑鍐呭鍒版枃浠躲��

##### (3) 鏂囦欢鍜岀紪杈戝櫒鎿嶄綔
- `confirm()`: 妫�鏌ュ綋鍓嶆椿璺冪紪杈戝櫒鐨勬枃妗ｆ槸鍚﹀凡淇敼銆�
- `close()`: 鍏抽棴褰撳墠缂栬緫鍣紝绉婚櫎鏂囦欢鍜岀紪杈戝櫒鐨勫叧鑱斻��
- `getEditorList()`: 鑾峰彇鎵�鏈夋枃浠剁殑鍒楄〃锛屾爣璇嗗摢浜涙枃浠跺凡淇敼骞舵樉绀烘鍦ㄧ紪杈戠殑鏂囦欢銆�
- `activateEditor(String filename)`: 婵�娲绘寚瀹氱殑缂栬緫鍣ㄣ��
- `isModified(File file)`: 妫�鏌ユ寚瀹氭枃浠舵槸鍚﹀凡淇敼銆�
- `isEditing(File file)`: 妫�鏌ユ寚瀹氭枃浠舵槸鍚︿负褰撳墠娲昏穬鐨勭紪杈戞枃浠躲��

##### (4) 鏂囦欢鐩綍灞曠ず
- `getDirTreeFormat(int level)`: 鑾峰彇褰撳墠缂栬緫鏂囦欢鎵�鍦ㄧ洰褰曠殑鏍戝舰缁撴瀯鏍煎紡銆�
- `getDirIndentFormat(int indent)`: 鑾峰彇褰撳墠缂栬緫鏂囦欢鎵�鍦ㄧ洰褰曠殑缂╄繘鏍煎紡銆�
- `printFile(File file, int indent, StringBuilder sb, String sep)`: 鎵撳嵃鐩綍涓殑鏂囦欢鍜屽叾淇敼鐘舵�併��
- `printIndent(File dir, int indent, StringBuilder sb)`: 閫掑綊鎵撳嵃鐩綍鍙婂叾瀛愮洰褰曠殑鏂囦欢淇℃伅銆�

##### (5) 浼氳瘽鐘舵�佺鐞�
- `isInSession(File file)`: 妫�鏌ユ枃浠舵槸鍚﹀湪褰撳墠浼氳瘽涓��
- `setShowId(boolean showId)`: 璁剧疆鏄惁鏄剧ず鏂囦欢鐨処D銆�

##### (6) 浼氳瘽閫�鍑轰笌鎭㈠
- `exit()`: 鍦ㄩ��鍑烘椂淇濆瓨褰撳墠浼氳瘽鐘舵�併��
- `recover(String filename)`: 鍦ㄥ惎鍔ㄦ椂浠庢枃浠朵腑鎭㈠浼氳瘽鏁版嵁銆�

#### 璁捐妯″紡锛�
1. **鍗曚緥妯″紡锛�**锛氶�氳繃`Session`绫讳腑鐨刞enter`鏂规硶鎺у埗浼氳瘽鐨勫敮涓�鎬э紝纭繚鍚屼竴鏃堕棿鍙湁涓�涓湁鏁堢殑浼氳瘽瀹炰緥銆傞�氳繃淇濆瓨鍜屾仮澶嶄細璇濈姸鎬侊紝浣垮緱浼氳瘽鐨勬暟鎹兘澶熻法浼氳瘽鎸佺画瀛樺湪锛岄槻姝㈠涓細璇濆疄渚嬬殑鍐茬獊銆�

2. **澶囧繕褰曟ā寮�**锛氶�氳繃`dump`鍜宍recover`鏂规硶锛屼繚瀛樺拰鎭㈠浼氳瘽鐨勭姸鎬併�俙DumpType`绫诲厖褰撳蹇樺綍锛岀敤浜庡瓨鍌ㄤ細璇濈殑鏁版嵁锛堝鏂囦欢鍒楄〃鍜屾瘡涓枃浠剁殑缂栬緫鍣ㄧ姸鎬侊級锛屽湪浼氳瘽閫�鍑烘垨鎭㈠鏃惰鍙栧拰鍐欏叆杩欎簺鏁版嵁锛屼互纭繚浼氳瘽鐨勭姸鎬佽兘澶熷洖閫�鍒扮壒瀹氭椂鍒汇��
>>>>>>> e620c3d0771af4c020a2f542294030dbaebb0ad2
